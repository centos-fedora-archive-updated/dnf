From fa5541bce749bc5e7a36913d3bf0ffb19b499fb8 Mon Sep 17 00:00:00 2001
From: Jaroslav Mracek <jmracek@redhat.com>
Date: Wed, 3 May 2017 09:52:41 +0200
Subject: [PATCH] Filter out src for get_best_selector

Closes: #799
Approved by: ignatenkobrain
---
 dnf/subject.py | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/dnf/subject.py b/dnf/subject.py
index d4834c08..cb754ce2 100644
--- a/dnf/subject.py
+++ b/dnf/subject.py
@@ -128,9 +128,11 @@ class Subject(object):
         solution = self._get_nevra_solution(sack, forms=forms)
         if solution['query']:
             q = solution['query']
+            q = q.filter(arch__neq="src")
             if obsoletes and solution['nevra'] and solution['nevra']._has_just_name():
                 q = q.union(sack.query().filter(obsoletes=q))
-            return sltr.set(pkg=q)
+            if q:
+                return sltr.set(pkg=q)
 
         return sltr
 
-- 
2.12.2

